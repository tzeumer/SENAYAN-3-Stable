<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Senayan3: simbio2/simbio_DB/datagrid/simbio_dbgrid.inc.php Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
  <div class="navpath"><a class="el" href="../../dir_a86f274dbd17fca1ae7eecf216667d5a.html">simbio2</a>&nbsp;&raquo&nbsp;<a class="el" href="../../dir_672472fd20be879c14d24cff2b2d1319.html">simbio_DB</a>&nbsp;&raquo&nbsp;<a class="el" href="../../dir_93fd227818008d2fdfd38c104c498235.html">datagrid</a>
  </div>
<div class="contents">
<h1>simbio_dbgrid.inc.php</h1><a href="../../db/d1c/simbio__dbgrid_8inc_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="preprocessor">##</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2007,2008  Arie Nugraha (dicarve@yahoo.com)</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#  This program is free software; you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#  it under the terms of the GNU General Public License as published by</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">#  the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#  (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor">#  This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#  GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#  along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">##</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00029"></a><a class="code" href="../../d5/deb/classsimbio__datagrid.html">00029</a> <span class="keyword">class </span><a class="code" href="../../d5/deb/classsimbio__datagrid.html">simbio_datagrid</a> <span class="keyword">extends</span> <a class="code" href="../../dc/dd3/classsimbio__table.html">simbio_table</a>
<a name="l00030"></a>00030 {
<a name="l00034"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_ac8540dfc71172d1c72bb7a3928689806.html#ac8540dfc71172d1c72bb7a3928689806">00034</a>     <span class="keyword">private</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_ac8540dfc71172d1c72bb7a3928689806.html#ac8540dfc71172d1c72bb7a3928689806">$grid_real_q</a> = <span class="keyword">false</span>;
<a name="l00035"></a>00035 
<a name="l00039"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_af9a17774f53fbb1b6cdfa4b00f377f58.html#af9a17774f53fbb1b6cdfa4b00f377f58">00039</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_af9a17774f53fbb1b6cdfa4b00f377f58.html#af9a17774f53fbb1b6cdfa4b00f377f58">$grid_result_fields</a> = array();
<a name="l00040"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_af889af1a8fa9991b8f46b7f04d3d2057.html#af889af1a8fa9991b8f46b7f04d3d2057">00040</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_af889af1a8fa9991b8f46b7f04d3d2057.html#af889af1a8fa9991b8f46b7f04d3d2057">$grid_result_rows</a> = array();
<a name="l00041"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a98070dd0de23a7f90a5d8a186396ae2b.html#a98070dd0de23a7f90a5d8a186396ae2b">00041</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a98070dd0de23a7f90a5d8a186396ae2b.html#a98070dd0de23a7f90a5d8a186396ae2b">$sql_table</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00042"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_aaef5a3ed66d4b868ac73ec0e95936b06.html#aaef5a3ed66d4b868ac73ec0e95936b06">00042</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_aaef5a3ed66d4b868ac73ec0e95936b06.html#aaef5a3ed66d4b868ac73ec0e95936b06">$sql_column</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00043"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a52815c8e71b76fdc26d998803884e49b.html#a52815c8e71b76fdc26d998803884e49b">00043</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a52815c8e71b76fdc26d998803884e49b.html#a52815c8e71b76fdc26d998803884e49b">$sql_criteria</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00044"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a3ad251b5ee129f16be261a90b49deaaa.html#a3ad251b5ee129f16be261a90b49deaaa">00044</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a3ad251b5ee129f16be261a90b49deaaa.html#a3ad251b5ee129f16be261a90b49deaaa">$sql_order</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00045"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a09349689030ba7198a094abf357c78bc.html#a09349689030ba7198a094abf357c78bc">00045</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a09349689030ba7198a094abf357c78bc.html#a09349689030ba7198a094abf357c78bc">$primary_keys</a> = array();
<a name="l00046"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_aa2fb7c42f37108819a489688dfac6a39.html#aa2fb7c42f37108819a489688dfac6a39">00046</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_aa2fb7c42f37108819a489688dfac6a39.html#aa2fb7c42f37108819a489688dfac6a39">$no_sort_column</a> = array();
<a name="l00047"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a832f769361e42615b25a2331220633bb.html#a832f769361e42615b25a2331220633bb">00047</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a832f769361e42615b25a2331220633bb.html#a832f769361e42615b25a2331220633bb">$modified_content</a> = array();
<a name="l00048"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_ae9d727211db85693287cc370f37c7554.html#ae9d727211db85693287cc370f37c7554">00048</a>     <span class="keyword">protected</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_ae9d727211db85693287cc370f37c7554.html#ae9d727211db85693287cc370f37c7554">$editable</a> = <span class="keyword">false</span>;
<a name="l00049"></a>00049 
<a name="l00053"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a85ae3e64cd40e9564adceb010085e9dd.html#a85ae3e64cd40e9564adceb010085e9dd">00053</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a85ae3e64cd40e9564adceb010085e9dd.html#a85ae3e64cd40e9564adceb010085e9dd">$debug</a> = <span class="keyword">false</span>;
<a name="l00054"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_ac926549b713e71c5f5fd63999cebfb8c.html#ac926549b713e71c5f5fd63999cebfb8c">00054</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_ac926549b713e71c5f5fd63999cebfb8c.html#ac926549b713e71c5f5fd63999cebfb8c">$num_rows</a> = 0;
<a name="l00055"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_abd39633cb34194620ae0e6e293179c08.html#abd39633cb34194620ae0e6e293179c08">00055</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_abd39633cb34194620ae0e6e293179c08.html#abd39633cb34194620ae0e6e293179c08">$chbox_form_URL</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00056"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a527fbad740a0172eae972da5d2a8fef8.html#a527fbad740a0172eae972da5d2a8fef8">00056</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a527fbad740a0172eae972da5d2a8fef8.html#a527fbad740a0172eae972da5d2a8fef8">$alt_row_color</a> = <span class="stringliteral">&apos;#FFFFFF&apos;</span>;
<a name="l00057"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_aab5ca71e95d8e92a9ea87abbbc56b3ba.html#aab5ca71e95d8e92a9ea87abbbc56b3ba">00057</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_aab5ca71e95d8e92a9ea87abbbc56b3ba.html#aab5ca71e95d8e92a9ea87abbbc56b3ba">$alt_row_color_2</a> = <span class="stringliteral">&apos;#CCCCCC&apos;</span>;
<a name="l00058"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a98b0a27bcbcb504601e48e59078330d3.html#a98b0a27bcbcb504601e48e59078330d3">00058</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a98b0a27bcbcb504601e48e59078330d3.html#a98b0a27bcbcb504601e48e59078330d3">$edit_link_text</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00059"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a63f4748915d2fdad2f2503705a7dbb59.html#a63f4748915d2fdad2f2503705a7dbb59">00059</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a63f4748915d2fdad2f2503705a7dbb59.html#a63f4748915d2fdad2f2503705a7dbb59">$table_name</a> = <span class="stringliteral">&apos;datagrid&apos;</span>;
<a name="l00060"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a5b91d0f82a42bfeb1bd76501ccf30e45.html#a5b91d0f82a42bfeb1bd76501ccf30e45">00060</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a5b91d0f82a42bfeb1bd76501ccf30e45.html#a5b91d0f82a42bfeb1bd76501ccf30e45">$column_width</a> = array();
<a name="l00061"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a56cb87fea9035a1a3c661d28c90f74f3.html#a56cb87fea9035a1a3c661d28c90f74f3">00061</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a56cb87fea9035a1a3c661d28c90f74f3.html#a56cb87fea9035a1a3c661d28c90f74f3">$sort_column</a> = array();
<a name="l00062"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a2244d5744c28175116f408339b35b3d9.html#a2244d5744c28175116f408339b35b3d9">00062</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a2244d5744c28175116f408339b35b3d9.html#a2244d5744c28175116f408339b35b3d9">$sql_group_by</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00063"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_ad499fbdc021b72c7b9d8b51063abb35b.html#ad499fbdc021b72c7b9d8b51063abb35b">00063</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_ad499fbdc021b72c7b9d8b51063abb35b.html#ad499fbdc021b72c7b9d8b51063abb35b">$select_flag</a> = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00064"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a105e87263d94bcc9052b18a1fec9fcad.html#a105e87263d94bcc9052b18a1fec9fcad">00064</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a105e87263d94bcc9052b18a1fec9fcad.html#a105e87263d94bcc9052b18a1fec9fcad">$chbox_property</a>;
<a name="l00065"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_afcc84d712296aab41560c06bdca24645.html#afcc84d712296aab41560c06bdca24645">00065</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_afcc84d712296aab41560c06bdca24645.html#afcc84d712296aab41560c06bdca24645">$edit_property</a>;
<a name="l00066"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_af2993cb79dd2ebb91b4eef2c4fab321e.html#af2993cb79dd2ebb91b4eef2c4fab321e">00066</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_af2993cb79dd2ebb91b4eef2c4fab321e.html#af2993cb79dd2ebb91b4eef2c4fab321e">$chbox_action_button</a> = <span class="keyword">false</span>;
<a name="l00067"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a28f047211f531c497cee5efb525f643b.html#a28f047211f531c497cee5efb525f643b">00067</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a28f047211f531c497cee5efb525f643b.html#a28f047211f531c497cee5efb525f643b">$chbox_confirm_msg</a> = <span class="keyword">false</span>;
<a name="l00068"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a8ed60f12a4d49a92cadd596fd881b904.html#a8ed60f12a4d49a92cadd596fd881b904">00068</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a8ed60f12a4d49a92cadd596fd881b904.html#a8ed60f12a4d49a92cadd596fd881b904">$current_page</a> = 1;
<a name="l00069"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a54ad3b2513f7ff7c19845a4657c6b60e.html#a54ad3b2513f7ff7c19845a4657c6b60e">00069</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a54ad3b2513f7ff7c19845a4657c6b60e.html#a54ad3b2513f7ff7c19845a4657c6b60e">$query_time</a> = 1;
<a name="l00070"></a>00070 <span class="preprocessor">    # are we using AJAX or not</span>
<a name="l00071"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a73eda8120a67c0f82f09b58e393f6aad.html#a73eda8120a67c0f82f09b58e393f6aad">00071</a> <span class="preprocessor"></span>    <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a73eda8120a67c0f82f09b58e393f6aad.html#a73eda8120a67c0f82f09b58e393f6aad">$using_AJAX</a> = <span class="keyword">true</span>;
<a name="l00072"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a638965f1733966e4d12b6b701265ceeb.html#a638965f1733966e4d12b6b701265ceeb">00072</a>     <span class="keyword">public</span> <a class="code" href="../../d5/deb/classsimbio__datagrid_a638965f1733966e4d12b6b701265ceeb.html#a638965f1733966e4d12b6b701265ceeb">$invisible_fields</a> = array();
<a name="l00073"></a>00073 
<a name="l00083"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a95544c52e2539557dd697befd2da1570.html#a95544c52e2539557dd697befd2da1570">00083</a>     <span class="keyword">public</span> function <a class="code" href="../../d5/deb/classsimbio__datagrid_a95544c52e2539557dd697befd2da1570.html#a95544c52e2539557dd697befd2da1570">createDataGrid</a>($obj_db, $str_db_table = <span class="stringliteral">&apos;&apos;</span>, $int_num2show = 30, $bool_editable = <span class="keyword">false</span>)
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085         <span class="comment">// Default checkbox properties</span>
<a name="l00086"></a>00086         <span class="keywordflow">if</span> (!isset($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a>)) $this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a> = array(<span class="stringliteral">&apos;itemID&apos;</span>, <a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;DELETE&apos;</span>));
<a name="l00087"></a>00087         <span class="keywordflow">if</span> (!isset($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a683dc6d38d0e2272841c7ae14b25c595.html#a683dc6d38d0e2272841c7ae14b25c595">edit_property</a>)) $this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a683dc6d38d0e2272841c7ae14b25c595.html#a683dc6d38d0e2272841c7ae14b25c595">edit_property</a> = array(<span class="stringliteral">&apos;itemID&apos;</span>, <a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;EDIT&apos;</span>));
<a name="l00088"></a>00088          
<a name="l00089"></a>00089         
<a name="l00090"></a>00090         <span class="comment">// check database connection</span>
<a name="l00091"></a>00091         <span class="keywordflow">if</span> (!$obj_db OR $obj_db-&gt;error) {
<a name="l00092"></a>00092             $_error = <span class="stringliteral">&apos;&lt;div style=&quot;padding: 5px; margin: 3px; border: 1px dotted #FF0000; color: #FF0000;&quot;&gt;&apos;</span>;
<a name="l00093"></a>00093             $_error .= <span class="stringliteral">&apos;ERROR : Cant create datagrid, database connection error!&apos;</span>;
<a name="l00094"></a>00094             $_error .= <span class="stringliteral">&apos;&lt;/div&gt;&apos;</span>;
<a name="l00095"></a>00095             <span class="keywordflow">return</span> $_error;
<a name="l00096"></a>00096         }
<a name="l00097"></a>00097 
<a name="l00098"></a>00098         <span class="comment">// set editable flag</span>
<a name="l00099"></a>00099         $this-&gt;editable = $bool_editable;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a92bb85022ba7f3810ebb54d8d77159df.html#a92bb85022ba7f3810ebb54d8d77159df">chbox_confirm_msg</a>) {
<a name="l00102"></a>00102             $this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a92bb85022ba7f3810ebb54d8d77159df.html#a92bb85022ba7f3810ebb54d8d77159df">chbox_confirm_msg</a> = <a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;Are You Sure Want to DELETE Selected Data?&apos;</span>);
<a name="l00103"></a>00103         }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105         <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a1437807d6d6458c9051a5463db087d4c.html#a1437807d6d6458c9051a5463db087d4c">chbox_action_button</a>) {
<a name="l00106"></a>00106             $this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a1437807d6d6458c9051a5463db087d4c.html#a1437807d6d6458c9051a5463db087d4c">chbox_action_button</a> = <a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;Delete Selected Data&apos;</span>);
<a name="l00107"></a>00107         }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109         $this-&gt;sql_table = $str_db_table;
<a name="l00110"></a>00110         $this-&gt;highlight_row = <span class="keyword">true</span>;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112         <span class="keywordflow">if</span> (empty($this-&gt;sql_table)) {
<a name="l00113"></a>00113             die(<span class="stringliteral">&apos;simbio_datagrid : Table not specified yet&apos;</span>);
<a name="l00114"></a>00114         }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116         <span class="comment">// get page number from http get var</span>
<a name="l00117"></a>00117         <span class="keywordflow">if</span> (isset($_GET[<span class="stringliteral">&apos;page&apos;</span>]) AND $_GET[<span class="stringliteral">&apos;page&apos;</span>] &gt; 1) {
<a name="l00118"></a>00118             $this-&gt;current_page = (integer) $_GET[<span class="stringliteral">&apos;page&apos;</span>];
<a name="l00119"></a>00119         }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121         <span class="comment">// count the row offset</span>
<a name="l00122"></a>00122         <span class="keywordflow">if</span> ($this-&gt;current_page &lt;= 1) {
<a name="l00123"></a>00123             $_offset = 0;
<a name="l00124"></a>00124         } <span class="keywordflow">else</span> {
<a name="l00125"></a>00125             $_offset = ($this-&gt;current_page*$int_num2show) - $int_num2show;
<a name="l00126"></a>00126         }
<a name="l00127"></a>00127 
<a name="l00128"></a>00128         <span class="comment">// change the record sorting if there fld var in URL</span>
<a name="l00129"></a>00129         $_dir = <span class="stringliteral">&apos;ASC&apos;</span>;
<a name="l00130"></a>00130         $_next_dir = <span class="stringliteral">&apos;DESC&apos;</span>;
<a name="l00131"></a>00131         $_sort_dir_info = <a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;ascendingly&apos;</span>);
<a name="l00132"></a>00132         <span class="keywordflow">if</span> (isset($_GET[<span class="stringliteral">&apos;fld&apos;</span>]) AND !empty($_GET[<span class="stringliteral">&apos;fld&apos;</span>])) {
<a name="l00133"></a>00133             $this-&gt;sql_order = <span class="stringliteral">&apos;ORDER BY `&apos;</span>.urldecode($_GET[<span class="stringliteral">&apos;fld&apos;</span>]).<span class="stringliteral">&apos;` &apos;</span>;
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135         <span class="comment">// record order direction</span>
<a name="l00136"></a>00136         <span class="keywordflow">if</span> (isset($_GET[<span class="stringliteral">&apos;dir&apos;</span>]) AND ($_dir = trim($_GET[<span class="stringliteral">&apos;dir&apos;</span>]))) {
<a name="l00137"></a>00137             <span class="keywordflow">if</span> ($_dir == <span class="stringliteral">&apos;DESC&apos;</span>) {
<a name="l00138"></a>00138                 $_next_dir = <span class="stringliteral">&apos;ASC&apos;</span>;
<a name="l00139"></a>00139             } <span class="keywordflow">else</span> {
<a name="l00140"></a>00140                 $_next_dir = <span class="stringliteral">&apos;DESC&apos;</span>;
<a name="l00141"></a>00141                 $_sort_dir_info = <a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;descendingly&apos;</span>);
<a name="l00142"></a>00142             }
<a name="l00143"></a>00143             <span class="comment">// append sort direction</span>
<a name="l00144"></a>00144             $this-&gt;sql_order .= $_dir;
<a name="l00145"></a>00145         }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147         <span class="comment">// check group by</span>
<a name="l00148"></a>00148         <span class="keywordflow">if</span> ($this-&gt;sql_group_by) {
<a name="l00149"></a>00149             $this-&gt;sql_group_by = <span class="stringliteral">&apos; GROUP BY &apos;</span>.$this-&gt;sql_group_by;
<a name="l00150"></a>00150         }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         <span class="comment">// sql string</span>
<a name="l00153"></a>00153         $_sql_str = <span class="stringliteral">&apos;SELECT SQL_CALC_FOUND_ROWS &apos;</span>.$this-&gt;select_flag.<span class="charliteral">&apos; &apos;</span>.$this-&gt;sql_column.
<a name="l00154"></a>00154             <span class="stringliteral">&apos; FROM &apos;</span>.$this-&gt;sql_table.<span class="charliteral">&apos; &apos;</span>.$this-&gt;sql_criteria.
<a name="l00155"></a>00155             <span class="charliteral">&apos; &apos;</span>.$this-&gt;sql_group_by.<span class="charliteral">&apos; &apos;</span>.$this-&gt;sql_order.<span class="stringliteral">&quot; LIMIT $int_num2show OFFSET $_offset&quot;</span>;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="comment">// for debugging purpose only</span>
<a name="l00158"></a>00158         <span class="comment">// return $_sql_str;</span>
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="comment">// real query</span>
<a name="l00161"></a>00161         $_start = function_exists(<span class="stringliteral">&apos;microtime&apos;</span>)?microtime(<span class="keyword">true</span>):time();
<a name="l00162"></a>00162         $this-&gt;grid_real_q = $obj_db-&gt;query($_sql_str);
<a name="l00163"></a>00163         $_end = function_exists(<span class="stringliteral">&apos;microtime&apos;</span>)?microtime(<span class="keyword">true</span>):time();
<a name="l00164"></a>00164         $this-&gt;query_time = round($_end-$_start, 5);
<a name="l00165"></a>00165         <span class="comment">// if the query error</span>
<a name="l00166"></a>00166         <span class="keywordflow">if</span> (!$this-&gt;grid_real_q OR $obj_db-&gt;error) {
<a name="l00167"></a>00167             $_error = <span class="stringliteral">&apos;&lt;div style=&quot;padding: 5px; margin: 3px; border: 1px dotted #FF0000; color: #FF0000;&quot;&gt;&apos;</span>;
<a name="l00168"></a>00168             $_error .= <span class="stringliteral">&apos;ERROR&lt;br /&gt;&apos;</span>;
<a name="l00169"></a>00169             $_error .= <span class="stringliteral">&apos;MySQL Server said : &apos;</span>.$obj_db-&gt;error.<span class="stringliteral">&apos;&apos;</span>;
<a name="l00170"></a>00170             <span class="keywordflow">if</span> ($this-&gt;debug) {
<a name="l00171"></a>00171                 $_error .= <span class="stringliteral">&apos;&lt;br /&gt;With SQL Query : &apos;</span>.strip_tags($_sql_str).<span class="stringliteral">&apos;&apos;</span>;
<a name="l00172"></a>00172             }
<a name="l00173"></a>00173             $_error .= <span class="stringliteral">&apos;&lt;/div&gt;&apos;</span>;
<a name="l00174"></a>00174             <span class="keywordflow">return</span> $_error;
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176         <span class="comment">// check if there any rows returned</span>
<a name="l00177"></a>00177         <span class="keywordflow">if</span> ($this-&gt;grid_real_q-&gt;num_rows &lt; 1) {
<a name="l00178"></a>00178             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="../../dc/dd3/classsimbio__table_aac544e8ae10d57582fb4ad223c90d4e5.html#aac544e8ae10d57582fb4ad223c90d4e5">printTable</a>();
<a name="l00179"></a>00179         }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181         <span class="comment">// fetch total number of data</span>
<a name="l00182"></a>00182         $_num_query = $obj_db-&gt;query(<span class="stringliteral">&apos;SELECT FOUND_ROWS()&apos;</span>);
<a name="l00183"></a>00183         $_data = $_num_query-&gt;fetch_row();
<a name="l00184"></a>00184         $this-&gt;num_rows = $_data[0];
<a name="l00185"></a>00185 
<a name="l00186"></a>00186         <span class="comment">// check the query string and rebuild with urlencoded value</span>
<a name="l00187"></a>00187         $_url_query_str = <span class="stringliteral">&apos;&apos;</span>;
<a name="l00188"></a>00188         <span class="keywordflow">if</span> (isset($_SERVER[<span class="stringliteral">&apos;QUERY_STRING&apos;</span>]) AND !empty($_SERVER[<span class="stringliteral">&apos;QUERY_STRING&apos;</span>])) {
<a name="l00189"></a>00189             parse_str($_SERVER[<span class="stringliteral">&apos;QUERY_STRING&apos;</span>], $arr_query_var);
<a name="l00190"></a>00190             <span class="comment">// rebuild query str without &quot;fld&quot; and &quot;dir&quot; var</span>
<a name="l00191"></a>00191             <span class="keywordflow">foreach</span> ($arr_query_var as $varname =&gt; $varvalue) {
<a name="l00192"></a>00192                 <span class="keywordflow">if</span> (!is_scalar($varvalue)) {
<a name="l00193"></a>00193                     <span class="keywordflow">continue</span>;
<a name="l00194"></a>00194                 }
<a name="l00195"></a>00195                 $varvalue = urlencode($varvalue);
<a name="l00196"></a>00196                 <span class="keywordflow">if</span> ($varname != <span class="stringliteral">&apos;fld&apos;</span> AND $varname != <span class="stringliteral">&apos;dir&apos;</span>) {
<a name="l00197"></a>00197                     $_url_query_str .= $varname.<span class="charliteral">&apos;=&apos;</span>.$varvalue.<span class="charliteral">&apos;&amp;&apos;</span>;
<a name="l00198"></a>00198                 }
<a name="l00199"></a>00199             }
<a name="l00200"></a>00200         }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         <span class="comment">// make all field name link for sorting</span>
<a name="l00203"></a>00203         $this-&gt;grid_result_fields = array();
<a name="l00204"></a>00204         <span class="comment">// adding record order links to field name header</span>
<a name="l00205"></a>00205         <span class="keywordflow">foreach</span> ($this-&gt;grid_real_q-&gt;fetch_fields() as $_fld) {
<a name="l00206"></a>00206             <span class="comment">// check if the column is not listed in no_sort_column array properties</span>
<a name="l00207"></a>00207             <span class="keywordflow">if</span> (!in_array($_fld-&gt;name, $this-&gt;no_sort_column) AND isset($this-&gt;sort_column[$_fld-&gt;name])) {
<a name="l00208"></a>00208                 $_order_by = <span class="stringliteral">&apos;fld=&apos;</span>.urlencode($this-&gt;sort_column[$_fld-&gt;name]).<span class="stringliteral">&apos;&amp;dir=&apos;</span>.$_next_dir;
<a name="l00209"></a>00209                 <span class="keywordflow">if</span> ($this-&gt;using_AJAX) {
<a name="l00210"></a>00210                     $this-&gt;grid_result_fields[] = <span class="stringliteral">&apos;&lt;a onmouseover=&quot;window.status = \&apos;\&apos;; return true;&quot; &apos;</span>
<a name="l00211"></a>00211                         .<span class="stringliteral">&apos;href=&quot;javascript: setContent(\&apos;mainContent\&apos;, \&apos;&apos;</span>.$_SERVER[<span class="stringliteral">&apos;PHP_SELF&apos;</span>].<span class="charliteral">&apos;?&apos;</span>.$_url_query_str.$_order_by.<span class="charliteral">&apos;\&apos;</span>, \<span class="stringliteral">&apos;get\&apos;);&quot; title=&quot;&apos;</span>.__(<span class="stringliteral">&apos;Order list by&apos;</span>).<span class="charliteral">&apos; &apos;</span>.$_fld-&gt;name.<span class="charliteral">&apos; &apos;</span>.$_sort_dir_info.<span class="stringliteral">&apos;&quot;&gt;&apos;</span>.$_fld-&gt;name.<span class="stringliteral">&apos;&lt;/a&gt;&apos;</span>;
<a name="l00212"></a>00212                 } <span class="keywordflow">else</span> {
<a name="l00213"></a>00213                     $this-&gt;grid_result_fields[] = <span class="stringliteral">&apos;&lt;a href=&quot;&apos;</span>.$_SERVER[<span class="stringliteral">&apos;PHP_SELF&apos;</span>].<span class="charliteral">&apos;?&apos;</span>.$_url_query_str.$_order_by.<span class="stringliteral">&apos;&quot; title=&quot;&apos;</span>.<a class="code" href="../../dd/df5/gettext_8inc_a7c8278de493ce8c0604694d31ffdc7cf.html#a7c8278de493ce8c0604694d31ffdc7cf">__</a>(<span class="stringliteral">&apos;Order list by&apos;</span>).<span class="charliteral">&apos; &apos;</span>.$_fld-&gt;name.<span class="charliteral">&apos; &apos;</span>.$_sort_dir_info.<span class="stringliteral">&apos;&quot;&gt;&apos;</span>.$_fld-&gt;name.<span class="stringliteral">&apos;&lt;/a&gt;&apos;</span>;
<a name="l00214"></a>00214                 }
<a name="l00215"></a>00215             } <span class="keywordflow">else</span> {
<a name="l00216"></a>00216                 $this-&gt;grid_result_fields[] = $_fld-&gt;name;
<a name="l00217"></a>00217             }
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220         <span class="comment">// table header and invisible fields shifting</span>
<a name="l00221"></a>00221         <span class="comment">// if the table is editable</span>
<a name="l00222"></a>00222         <span class="keywordflow">if</span> ($this-&gt;editable) {
<a name="l00223"></a>00223             <span class="comment">// invisible fields shifting value</span>
<a name="l00224"></a>00224             $_shift = 1;
<a name="l00225"></a>00225             <span class="comment">// chbox and edit property checking</span>
<a name="l00226"></a>00226             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a> AND $this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a683dc6d38d0e2272841c7ae14b25c595.html#a683dc6d38d0e2272841c7ae14b25c595">edit_property</a>) {
<a name="l00227"></a>00227                 $_edit_header_fields = array($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a>[1], $this-&gt;edit_property[1]);
<a name="l00228"></a>00228                 $_shift = 2;
<a name="l00229"></a>00229             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a> AND !$this-&gt;edit_property) {
<a name="l00230"></a>00230                 $_edit_header_fields = array($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a>[1]);
<a name="l00231"></a>00231             } <span class="keywordflow">else</span> {
<a name="l00232"></a>00232                 $_edit_header_fields = array($this-&gt;edit_property[1]);
<a name="l00233"></a>00233             }
<a name="l00234"></a>00234             <span class="comment">// concat arrays</span>
<a name="l00235"></a>00235             unset($this-&gt;grid_result_fields[0]);
<a name="l00236"></a>00236             $this-&gt;grid_result_fields = array_merge($_edit_header_fields, $this-&gt;grid_result_fields);
<a name="l00237"></a>00237             <span class="comment">// invisible field shifting</span>
<a name="l00238"></a>00238             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="../../de/d12/admin_2modules_2serial__control_2index_8php_ad248be1bf82f755c8dc94fdefdb36676.html#ad248be1bf82f755c8dc94fdefdb36676">invisible_fields</a>) {
<a name="l00239"></a>00239                 $_shifted_inv_fld = array();
<a name="l00240"></a>00240                 <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="../../de/d12/admin_2modules_2serial__control_2index_8php_ad248be1bf82f755c8dc94fdefdb36676.html#ad248be1bf82f755c8dc94fdefdb36676">invisible_fields</a> as $_inv_fld) {
<a name="l00241"></a>00241                     $_shifted_inv_fld[] = $_inv_fld+$_shift;
<a name="l00242"></a>00242                 }
<a name="l00243"></a>00243                 $this-&gt;<a class="code" href="../../de/d12/admin_2modules_2serial__control_2index_8php_ad248be1bf82f755c8dc94fdefdb36676.html#ad248be1bf82f755c8dc94fdefdb36676">invisible_fields</a> = $_shifted_inv_fld;
<a name="l00244"></a>00244             }
<a name="l00245"></a>00245         }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         <span class="comment">// field count</span>
<a name="l00248"></a>00248         $_field_cnt = count($this-&gt;grid_result_fields);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250         $_row = 1;
<a name="l00251"></a>00251         <span class="comment">// records</span>
<a name="l00252"></a>00252         <span class="keywordflow">while</span> ($_data = $this-&gt;grid_real_q-&gt;fetch_row()) {
<a name="l00253"></a>00253             $this-&gt;grid_result_rows[$_row] = $_data;
<a name="l00254"></a>00254             $_row_class = ($_row%2 == 0)?<span class="stringliteral">&apos;alterCell&apos;</span>:<span class="stringliteral">&apos;alterCell2&apos;</span>;
<a name="l00255"></a>00255 
<a name="l00256"></a>00256             <span class="comment">// modified content</span>
<a name="l00257"></a>00257             <span class="keywordflow">foreach</span> ($this-&gt;modified_content as $_field_num =&gt; $_new_content) {
<a name="l00258"></a>00258                 <span class="comment">// change the value of modified column</span>
<a name="l00259"></a>00259                 <span class="keywordflow">if</span> (isset($this-&gt;grid_result_rows[$_row][$_field_num])) {
<a name="l00260"></a>00260                     <span class="comment">// run callback function php script if the string is embraced by &quot;callback{*}&quot;</span>
<a name="l00261"></a>00261                     <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&apos;@^callback\{.+\}@i&apos;</span>, $_new_content)) {
<a name="l00262"></a>00262                         <span class="comment">// strip the &quot;callback{&quot; and &quot;}&quot; string to empty string</span>
<a name="l00263"></a>00263                         $_callback_func = str_replace(array(<span class="stringliteral">&apos;callback{&apos;</span>, <span class="charliteral">&apos;}&apos;</span>), <span class="stringliteral">&apos;&apos;</span>, $_new_content);
<a name="l00264"></a>00264                         <span class="keywordflow">if</span> (function_exists($_callback_func)) {
<a name="l00265"></a>00265                             <span class="comment">// call the function</span>
<a name="l00266"></a>00266                             $this-&gt;grid_result_rows[$_row][$_field_num] = $_callback_func($obj_db, $this-&gt;grid_result_rows[$_row], $_field_num);
<a name="l00267"></a>00267                         } <span class="keywordflow">else</span> { $this-&gt;grid_result_rows[$_row][$_field_num] = $_callback_func; }
<a name="l00268"></a>00268                     } <span class="keywordflow">else</span> {
<a name="l00269"></a>00269                         <span class="comment">// replace the &quot;{column_value}&quot; marker with real column value</span>
<a name="l00270"></a>00270                         $this-&gt;grid_result_rows[$_row][$_field_num] = str_replace(<span class="stringliteral">&apos;{column_value}&apos;</span>, $this-&gt;grid_result_rows[$_row][$_field_num], trim($_new_content));
<a name="l00271"></a>00271                     }
<a name="l00272"></a>00272                 }
<a name="l00273"></a>00273             }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275             <span class="comment">// if the table is editable</span>
<a name="l00276"></a>00276             <span class="comment">// make delete checkbox and edit button</span>
<a name="l00277"></a>00277             <span class="keywordflow">if</span> ($this-&gt;editable) {
<a name="l00278"></a>00278                 <span class="comment">// reset edit_fields array</span>
<a name="l00279"></a>00279                 $_edit_fields = array();
<a name="l00280"></a>00280                 <span class="comment">// check if checkbox array is included</span>
<a name="l00281"></a>00281                 <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="../../da/d2e/dl__print_8php_a24bfae120f47d66a59391a4619e8e46f.html#a24bfae120f47d66a59391a4619e8e46f">chbox_property</a>) {
<a name="l00282"></a>00282                     $_del_chbox = <span class="stringliteral">&apos;&lt;input type=&quot;checkbox&quot; name=&quot;&apos;</span>.$this-&gt;chbox_property[0].<span class="stringliteral">&apos;[]&quot; value=&quot;&apos;</span>.$this-&gt;grid_result_rows[$_row][0].<span class="stringliteral">&apos;&quot; id=&quot;cbRow&apos;</span>.$_row.<span class="stringliteral">&apos;&quot; onclick=&quot;cbHighlightRow(this, \&apos;row&apos;</span>.$_row.<span class="charliteral">&apos;\&apos;</span>, event)<span class="stringliteral">&quot; /&gt;&apos;;</span>
<a name="l00283"></a>00283 <span class="stringliteral">                    $_edit_fields[] = $_del_chbox;</span>
<a name="l00284"></a>00284 <span class="stringliteral">                }</span>
<a name="l00285"></a>00285 <span class="stringliteral">                // check if edit link array is included</span>
<a name="l00286"></a>00286 <span class="stringliteral">                if ($this-&gt;edit_property) {</span>
<a name="l00287"></a>00287 <span class="stringliteral">                    if ($this-&gt;using_AJAX) {</span>
<a name="l00288"></a>00288 <span class="stringliteral">                        $_edit_link = &apos;&lt;a href=&quot;</span>#<span class="stringliteral">&quot; class=&quot;</span>editLink<span class="stringliteral">&quot; &apos;</span>
<a name="l00289"></a>00289 <span class="stringliteral">                            .&apos;onclick=&quot;</span>setContent(\<span class="stringliteral">&apos;mainContent\&apos;, \&apos;&apos;</span>.$_SERVER[<span class="stringliteral">&apos;PHP_SELF&apos;</span>].<span class="charliteral">&apos;?&apos;</span>.$_url_query_str.<span class="charliteral">&apos;\&apos;</span>, \<span class="stringliteral">&apos;post\&apos;, \&apos;&apos;</span>.$this-&gt;edit_property[0].<span class="charliteral">&apos;=&apos;</span>.$this-&gt;grid_result_rows[$_row][0].<span class="stringliteral">&apos;&amp;detail=true\&apos;, true);&quot; title=&quot;Detail&quot;&gt;&apos;</span>.( $this-&gt;edit_link_text?$this-&gt;edit_link_text:<span class="stringliteral">&apos;&amp;nbsp;&apos;</span> ).<span class="stringliteral">&apos;&lt;/a&gt;&apos;</span>;
<a name="l00290"></a>00290                     } <span class="keywordflow">else</span> {
<a name="l00291"></a>00291                         $_edit_link = <span class="stringliteral">&apos;&lt;a href=&quot;#&quot; class=&quot;editLink&quot; &apos;</span>
<a name="l00292"></a>00292                             .<span class="stringliteral">&apos;onclick=&quot;showDetailForm(\&apos;notAJAXhiddenForm\&apos;, \&apos;&apos;</span>.$_SERVER[<span class="stringliteral">&apos;PHP_SELF&apos;</span>].<span class="charliteral">&apos;?&apos;</span>.$_url_query_str.<span class="charliteral">&apos;\&apos;</span>, \<span class="stringliteral">&apos;&apos;</span>.$this-&gt;grid_result_rows[$_row][0].<span class="charliteral">&apos;\&apos;</span>)<span class="stringliteral">&quot; title=&quot;</span>Edit<span class="stringliteral">&quot;&gt;&apos;.( $this-&gt;edit_link_text?$this-&gt;edit_link_text:&apos;&amp;nbsp;&apos; ).&apos;&lt;/a&gt;&apos;;</span>
<a name="l00293"></a>00293 <span class="stringliteral">                    }</span>
<a name="l00294"></a>00294 <span class="stringliteral">                    $_edit_fields[] = $_edit_link;</span>
<a name="l00295"></a>00295 <span class="stringliteral">                }</span>
<a name="l00296"></a>00296 <span class="stringliteral">                // unset the first element (ID field)</span>
<a name="l00297"></a>00297 <span class="stringliteral">                unset($this-&gt;grid_result_rows[$_row][0]);</span>
<a name="l00298"></a>00298 <span class="stringliteral">                $this-&gt;grid_result_rows[$_row] = array_merge($_edit_fields, $this-&gt;grid_result_rows[$_row]);</span>
<a name="l00299"></a>00299 <span class="stringliteral">            }</span>
<a name="l00300"></a>00300 <span class="stringliteral"></span>
<a name="l00301"></a>00301 <span class="stringliteral">            // editable field style and column width modification</span>
<a name="l00302"></a>00302 <span class="stringliteral">            for ($f = 0; $f &lt; $_field_cnt; $f++) {</span>
<a name="l00303"></a>00303 <span class="stringliteral">                if (($this-&gt;chbox_property AND $this-&gt;edit_property) AND ($f &lt; 2) AND $this-&gt;editable) {</span>
<a name="l00304"></a>00304 <span class="stringliteral">                    $this-&gt;setCellAttr($_row, $f, &apos;align=&quot;</span>center<span class="stringliteral">&quot; valign=&quot;</span>top<span class="stringliteral">&quot; class=&quot;</span><span class="stringliteral">&apos;.$_row_class.&apos;</span><span class="stringliteral">&quot; style=&quot;</span>width: 5%;<span class="stringliteral">&quot;&apos;);</span>
<a name="l00305"></a>00305 <span class="stringliteral">                } else {</span>
<a name="l00306"></a>00306 <span class="stringliteral">                    // checking for special field width value set by column_width property array</span>
<a name="l00307"></a>00307 <span class="stringliteral">                    $_row_attr = &apos;valign=&quot;</span>top<span class="stringliteral">&quot;&apos;;</span>
<a name="l00308"></a>00308 <span class="stringliteral">                    if ($this-&gt;editable) {</span>
<a name="l00309"></a>00309 <span class="stringliteral">                        if (($this-&gt;chbox_property AND $this-&gt;edit_property) AND isset($this-&gt;column_width[$f-2])) {</span>
<a name="l00310"></a>00310 <span class="stringliteral">                            $_row_attr .= &apos; style=&quot;</span>width: <span class="stringliteral">&apos;.$this-&gt;column_width[$f-2].&apos;</span>;<span class="stringliteral">&quot;&apos;;</span>
<a name="l00311"></a>00311 <span class="stringliteral">                        } else if ( (($this-&gt;chbox_property AND !$this-&gt;edit_property) OR (!$this-&gt;chbox_property AND $this-&gt;edit_property)) AND isset($this-&gt;column_width[$f-1])) {</span>
<a name="l00312"></a>00312 <span class="stringliteral">                            $_row_attr .= &apos; style=&quot;</span>width: <span class="stringliteral">&apos;.$this-&gt;column_width[$f-1].&apos;</span>;<span class="stringliteral">&quot;&apos;;</span>
<a name="l00313"></a>00313 <span class="stringliteral">                        }</span>
<a name="l00314"></a>00314 <span class="stringliteral">                    } else {</span>
<a name="l00315"></a>00315 <span class="stringliteral">                        if (isset($this-&gt;column_width[$f])) {</span>
<a name="l00316"></a>00316 <span class="stringliteral">                            $_row_attr .= &apos; style=&quot;</span>width: <span class="stringliteral">&apos;.$this-&gt;column_width[$f].&apos;</span>;<span class="stringliteral">&quot;&apos;;</span>
<a name="l00317"></a>00317 <span class="stringliteral">                        }</span>
<a name="l00318"></a>00318 <span class="stringliteral">                    }</span>
<a name="l00319"></a>00319 <span class="stringliteral">                    $this-&gt;setCellAttr($_row, $f, $_row_attr.&apos; class=&quot;</span><span class="stringliteral">&apos;.$_row_class.&apos;</span><span class="stringliteral">&quot;&apos;);</span>
<a name="l00320"></a>00320 <span class="stringliteral">                }</span>
<a name="l00321"></a>00321 <span class="stringliteral">            }</span>
<a name="l00322"></a>00322 <span class="stringliteral">            $_row++;</span>
<a name="l00323"></a>00323 <span class="stringliteral">        }</span>
<a name="l00324"></a>00324 <span class="stringliteral"></span>
<a name="l00325"></a>00325 <span class="stringliteral">        // free resultset memory</span>
<a name="l00326"></a>00326 <span class="stringliteral">        $this-&gt;grid_real_q-&gt;free_result();</span>
<a name="l00327"></a>00327 <span class="stringliteral"></span>
<a name="l00328"></a>00328 <span class="stringliteral">        // return the formatted output</span>
<a name="l00329"></a>00329 <span class="stringliteral">        return $this-&gt;makeOutput($int_num2show);</span>
<a name="l00330"></a>00330 <span class="stringliteral">    }</span>
<a name="l00331"></a>00331 <span class="stringliteral"></span>
<a name="l00332"></a>00332 <span class="stringliteral"></span>
<a name="l00339"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a1a82c0ff30b329e43ec4b1c56d8a2e8c.html#a1a82c0ff30b329e43ec4b1c56d8a2e8c">00339</a> <span class="stringliteral">    protected function makeOutput($int_num2show = 30)</span>
<a name="l00340"></a>00340 <span class="stringliteral">    {</span>
<a name="l00341"></a>00341 <span class="stringliteral">        // remove invisible fields</span>
<a name="l00342"></a>00342 <span class="stringliteral">        $this-&gt;removeInvisibleField();</span>
<a name="l00343"></a>00343 <span class="stringliteral">        // get fields array and set the table header</span>
<a name="l00344"></a>00344 <span class="stringliteral">        $this-&gt;setHeader($this-&gt;grid_result_fields);</span>
<a name="l00345"></a>00345 <span class="stringliteral">        // data loop</span>
<a name="l00346"></a>00346 <span class="stringliteral">        foreach ($this-&gt;grid_result_rows as $_data) {</span>
<a name="l00347"></a>00347 <span class="stringliteral">            // append array to table</span>
<a name="l00348"></a>00348 <span class="stringliteral">            $this-&gt;appendTableRow($_data);</span>
<a name="l00349"></a>00349 <span class="stringliteral">        }</span>
<a name="l00350"></a>00350 <span class="stringliteral"></span>
<a name="l00351"></a>00351 <span class="stringliteral">        // init buffer return var</span>
<a name="l00352"></a>00352 <span class="stringliteral">        $_buffer = &apos;&apos;;</span>
<a name="l00353"></a>00353 <span class="stringliteral"></span>
<a name="l00354"></a>00354 <span class="stringliteral">        // create paging</span>
<a name="l00355"></a>00355 <span class="stringliteral">        $_paging =  null;</span>
<a name="l00356"></a>00356 <span class="stringliteral">        if ($this-&gt;num_rows &gt; $int_num2show) {</span>
<a name="l00357"></a>00357 <span class="stringliteral">            if ($this-&gt;using_AJAX) {</span>
<a name="l00358"></a>00358 <span class="stringliteral">                $_paging = simbio_paging_ajax::paging($this-&gt;num_rows, $int_num2show, 5);</span>
<a name="l00359"></a>00359 <span class="stringliteral">            } else {</span>
<a name="l00360"></a>00360 <span class="stringliteral">                $_paging = simbio_paging::paging($this-&gt;num_rows, $int_num2show, 5);</span>
<a name="l00361"></a>00361 <span class="stringliteral">            }</span>
<a name="l00362"></a>00362 <span class="stringliteral">        }</span>
<a name="l00363"></a>00363 <span class="stringliteral">        // setting form target</span>
<a name="l00364"></a>00364 <span class="stringliteral">        $_target = &apos;_self&apos;;</span>
<a name="l00365"></a>00365 <span class="stringliteral">        $_iframe = &apos;&lt;form name=&quot;</span>notAJAXhiddenForm<span class="stringliteral">&quot; id=&quot;</span>notAJAXhiddenForm<span class="stringliteral">&quot; action=&quot;</span><span class="stringliteral">&quot; method=&quot;</span>post<span class="stringliteral">&quot; style=&quot;</span>display: <span class="keyword">inline</span>;<span class="stringliteral">&quot;&gt;&lt;input type=&quot;</span>hidden<span class="stringliteral">&quot; name=&quot;</span>itemID<span class="stringliteral">&quot; value=&quot;</span><span class="stringliteral">&quot; /&gt;&lt;input type=&quot;</span>hidden<span class="stringliteral">&quot; name=&quot;</span><a class="code" href="../../d5/da4/classdetail.html">detail</a><span class="stringliteral">&quot; value=&quot;</span><span class="keyword">true</span><span class="stringliteral">&quot; /&gt;&lt;/form&gt;&apos;;</span>
<a name="l00366"></a>00366 <span class="stringliteral">        if ($this-&gt;using_AJAX) {</span>
<a name="l00367"></a>00367 <span class="stringliteral">            $_target = &apos;submitExec&apos;;</span>
<a name="l00368"></a>00368 <span class="stringliteral">            $_iframe = &apos;&lt;iframe name=&quot;</span>submitExec<span class="stringliteral">&quot; style=&quot;</span>visibility: hidden; width: 100%; height: 0;<span class="stringliteral">&quot;&gt;&lt;/iframe&gt;&apos;.&quot;</span>\n<span class="stringliteral">&quot;;</span>
<a name="l00369"></a>00369 <span class="stringliteral">            // below is for debugging purpose only</span>
<a name="l00370"></a>00370 <span class="stringliteral">            // $_iframe = &apos;&lt;iframe name=&quot;</span>submitExec<span class="stringliteral">&quot; style=&quot;</span>visibility: visible; width: 100%; height: 300px;<span class="stringliteral">&quot;&gt;&lt;/iframe&gt;&apos;.&quot;</span>\n<span class="stringliteral">&quot;;</span>
<a name="l00371"></a>00371 <span class="stringliteral">        }</span>
<a name="l00372"></a>00372 <span class="stringliteral">        // if editable</span>
<a name="l00373"></a>00373 <span class="stringliteral">        if ($this-&gt;editable) {</span>
<a name="l00374"></a>00374 <span class="stringliteral">            $_buffer .= &apos;&lt;form action=&quot;</span><span class="stringliteral">&apos;.$this-&gt;chbox_form_URL.&apos;</span><span class="stringliteral">&quot; name=&quot;</span><span class="stringliteral">&apos;.$this-&gt;table_name.&apos;</span><span class="stringliteral">&quot; id=&quot;</span><span class="stringliteral">&apos;.$this-&gt;table_name.&apos;</span><span class="stringliteral">&quot; target=&quot;</span><span class="stringliteral">&apos;.$_target.&apos;</span><span class="stringliteral">&quot; method=&quot;</span>post<span class="stringliteral">&quot; style=&quot;</span>display: <span class="keyword">inline</span>;<span class="stringliteral">&quot;&gt;&apos;.&quot;</span>\n<span class="stringliteral">&quot;;</span>
<a name="l00375"></a>00375 <span class="stringliteral"></span>
<a name="l00376"></a>00376 <span class="stringliteral">      $_check_all = __(&apos;Check All&apos;);</span>
<a name="l00377"></a>00377 <span class="stringliteral">      $_uncheck_all = __(&apos;Uncheck All&apos;);</span>
<a name="l00378"></a>00378 <span class="stringliteral"></span>
<a name="l00379"></a>00379 <span class="stringliteral">            // action buttons group</span>
<a name="l00380"></a>00380 <span class="stringliteral">            $_button_grp = &apos;&lt;table cellspacing=&quot;</span>0<span class="stringliteral">&quot; cellpadding=&quot;</span>5<span class="stringliteral">&quot; style=&quot;</span>background-color: #dcdcdc; width: 100%;<span class="stringliteral">&quot;&gt;&lt;tr&gt;&apos;;</span>
<a name="l00381"></a>00381 <span class="stringliteral">            // if checkbox is include then show button</span>
<a name="l00382"></a>00382 <span class="stringliteral">            if ($this-&gt;chbox_property) {</span>
<a name="l00383"></a>00383 <span class="stringliteral">                $_button_grp .= &apos;&lt;td&gt;&lt;input type=&quot;</span>button<span class="stringliteral">&quot; onclick=&quot;</span>chboxFormSubmit(\<span class="stringliteral">&apos;&apos;</span>.$this-&gt;table_name.<span class="charliteral">&apos;\&apos;</span>, \<span class="stringliteral">&apos;&apos;</span>.$this-&gt;chbox_confirm_msg.<span class="charliteral">&apos;\&apos;</span>)<span class="stringliteral">&quot; value=&quot;</span><span class="stringliteral">&apos;.$this-&gt;chbox_action_button.&apos;</span><span class="stringliteral">&quot; class=&quot;</span>button<span class="stringliteral">&quot; /&gt; &apos;</span>
<a name="l00384"></a>00384 <span class="stringliteral">                    .&apos;&lt;input type=&quot;</span>button<span class="stringliteral">&quot; onclick=&quot;</span>checkAll(\<span class="stringliteral">&apos;&apos;</span>.$this-&gt;table_name.<span class="charliteral">&apos;\&apos;</span>, <span class="keyword">false</span>)<span class="stringliteral">&quot; value=&quot;</span><span class="stringliteral">&apos;.$_check_all.&apos;</span><span class="stringliteral">&quot; class=&quot;</span>button<span class="stringliteral">&quot; /&gt; &apos;</span>
<a name="l00385"></a>00385 <span class="stringliteral">                    .&apos;&lt;input type=&quot;</span>button<span class="stringliteral">&quot; onclick=&quot;</span>checkAll(\<span class="stringliteral">&apos;&apos;</span>.$this-&gt;table_name.<span class="charliteral">&apos;\&apos;</span>, <span class="keyword">true</span>)<span class="stringliteral">&quot; value=&quot;</span><span class="stringliteral">&apos;.$_uncheck_all.&apos;</span><span class="stringliteral">&quot; class=&quot;</span>button<span class="stringliteral">&quot; /&gt; &apos;</span>
<a name="l00386"></a>00386 <span class="stringliteral">                    .&apos;&lt;/td&gt;&apos;;</span>
<a name="l00387"></a>00387 <span class="stringliteral">            }</span>
<a name="l00388"></a>00388 <span class="stringliteral"></span>
<a name="l00389"></a>00389 <span class="stringliteral">            // paging</span>
<a name="l00390"></a>00390 <span class="stringliteral">            if ($_paging) {</span>
<a name="l00391"></a>00391 <span class="stringliteral">                $_button_grp .= &apos;&lt;td align=&quot;</span>right<span class="stringliteral">&quot;&gt;&apos;.$_paging.&quot;</span>\n<span class="stringliteral">&quot;.&apos;&lt;/td&gt;&apos;;</span>
<a name="l00392"></a>00392 <span class="stringliteral">            }</span>
<a name="l00393"></a>00393 <span class="stringliteral">            $_button_grp .= &apos;&lt;/tr&gt;&lt;/table&gt;&apos;.&quot;</span>\n<span class="stringliteral">&quot;;</span>
<a name="l00394"></a>00394 <span class="stringliteral"></span>
<a name="l00395"></a>00395 <span class="stringliteral">            // table grid</span>
<a name="l00396"></a>00396 <span class="stringliteral">            $_buffer .= $_button_grp.$this-&gt;printTable().$_button_grp</span>
<a name="l00397"></a>00397 <span class="stringliteral">                .&apos;&lt;input type=&quot;</span>hidden<span class="stringliteral">&quot; name=&quot;</span>itemAction<span class="stringliteral">&quot; value=&quot;</span><span class="keyword">true</span><span class="stringliteral">&quot; /&gt;&apos;</span>
<a name="l00398"></a>00398 <span class="stringliteral">                .&apos;&lt;input type=&quot;</span>hidden<span class="stringliteral">&quot; name=&quot;</span>lastQueryStr<span class="stringliteral">&quot; value=&quot;</span><span class="stringliteral">&apos;.$_SERVER[&apos;</span>QUERY_STRING<span class="stringliteral">&apos;].&apos;</span><span class="stringliteral">&quot; /&gt;&apos;.&quot;</span>\n<span class="stringliteral">&quot;</span>
<a name="l00399"></a>00399 <span class="stringliteral">                .&apos;&lt;/form&gt;&apos;.&quot;</span>\n<span class="stringliteral">&quot;</span>
<a name="l00400"></a>00400 <span class="stringliteral">                .$_iframe;</span>
<a name="l00401"></a>00401 <span class="stringliteral">        } else {</span>
<a name="l00402"></a>00402 <span class="stringliteral">            // paging</span>
<a name="l00403"></a>00403 <span class="stringliteral">            $_button_grp = &apos;&apos;;</span>
<a name="l00404"></a>00404 <span class="stringliteral">            if ($_paging) {</span>
<a name="l00405"></a>00405 <span class="stringliteral">                $_button_grp .= &apos;&lt;table cellspacing=&quot;</span>0<span class="stringliteral">&quot; cellpadding=&quot;</span>5<span class="stringliteral">&quot; class=&quot;</span>notprinted<span class="stringliteral">&quot; style=&quot;</span>background-color: #dcdcdc; width: 100%;<span class="stringliteral">&quot;&gt;&apos;</span>
<a name="l00406"></a>00406 <span class="stringliteral">                    .&apos;&lt;tr&gt;&lt;td align=&quot;</span>right<span class="stringliteral">&quot;&gt;&apos;.$_paging.&quot;</span>\n<span class="stringliteral">&quot;.&apos;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&apos;;</span>
<a name="l00407"></a>00407 <span class="stringliteral">            }</span>
<a name="l00408"></a>00408 <span class="stringliteral"></span>
<a name="l00409"></a>00409 <span class="stringliteral">            $_buffer .= $_button_grp.$this-&gt;printTable().$_button_grp;</span>
<a name="l00410"></a>00410 <span class="stringliteral">        }</span>
<a name="l00411"></a>00411 <span class="stringliteral"></span>
<a name="l00412"></a>00412 <span class="stringliteral">        return $_buffer;</span>
<a name="l00413"></a>00413 <span class="stringliteral">    }</span>
<a name="l00414"></a>00414 <span class="stringliteral"></span>
<a name="l00415"></a>00415 <span class="stringliteral"></span>
<a name="l00422"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_aeec9bc5dc53f6ef0e002e8fc3f5b1c2f.html#aeec9bc5dc53f6ef0e002e8fc3f5b1c2f">00422</a> <span class="stringliteral">    public function setSQLColumn()</span>
<a name="l00423"></a>00423 <span class="stringliteral">    {</span>
<a name="l00424"></a>00424 <span class="stringliteral">        $_args_num = func_num_args();</span>
<a name="l00425"></a>00425 <span class="stringliteral">        if ($_args_num &lt; 1) {</span>
<a name="l00426"></a>00426 <span class="stringliteral">            $this-&gt;sql_column = &apos;*&apos;;</span>
<a name="l00427"></a>00427 <span class="stringliteral">        } else if ($_args_num == 1) {</span>
<a name="l00428"></a>00428 <span class="stringliteral">            $this-&gt;sql_column = func_get_arg(0);</span>
<a name="l00429"></a>00429 <span class="stringliteral">        } else {</span>
<a name="l00430"></a>00430 <span class="stringliteral">            // get all function arguments</span>
<a name="l00431"></a>00431 <span class="stringliteral">            $columns = func_get_args();</span>
<a name="l00432"></a>00432 <span class="stringliteral">            // iterate all arguments</span>
<a name="l00433"></a>00433 <span class="stringliteral">            foreach ($columns as $_field) {</span>
<a name="l00434"></a>00434 <span class="stringliteral">                $_column_alias = &apos;&apos;;</span>
<a name="l00435"></a>00435 <span class="stringliteral">                $_real_column = &apos;&apos;;</span>
<a name="l00436"></a>00436 <span class="stringliteral">                if (preg_match(&apos;/\sAS\s/i&apos;, $_field)) {</span>
<a name="l00437"></a>00437 <span class="stringliteral">                    $_field_n_alias = explode(&apos; AS &apos;, $_field);</span>
<a name="l00438"></a>00438 <span class="stringliteral">                    $_real_column = $_field_n_alias[0];</span>
<a name="l00439"></a>00439 <span class="stringliteral">                    $_column_alias = str_replace(&quot;</span><span class="stringliteral">&apos;&quot;, &apos;</span><span class="stringliteral">&apos;, $_field_n_alias[1]);</span>
<a name="l00440"></a>00440 <span class="stringliteral">                } else {</span>
<a name="l00441"></a>00441 <span class="stringliteral">                    $_real_column = $_field;</span>
<a name="l00442"></a>00442 <span class="stringliteral">                    $_column_alias = $_field;</span>
<a name="l00443"></a>00443 <span class="stringliteral">                }</span>
<a name="l00444"></a>00444 <span class="stringliteral">                // store to class properties</span>
<a name="l00445"></a>00445 <span class="stringliteral">                $this-&gt;sql_column .= $_field.&apos;</span>, <span class="stringliteral">&apos;;</span>
<a name="l00446"></a>00446 <span class="stringliteral">                // $this-&gt;sort_column[trim($_column_alias)] = trim($_real_column);</span>
<a name="l00447"></a>00447 <span class="stringliteral">                $this-&gt;sort_column[trim($_column_alias)] = trim($_column_alias);</span>
<a name="l00448"></a>00448 <span class="stringliteral">            }</span>
<a name="l00449"></a>00449 <span class="stringliteral"></span>
<a name="l00450"></a>00450 <span class="stringliteral">            // remove the last comma</span>
<a name="l00451"></a>00451 <span class="stringliteral">            $this-&gt;sql_column = substr_replace($this-&gt;sql_column, &apos;</span> <span class="stringliteral">&apos;, -2);</span>
<a name="l00452"></a>00452 <span class="stringliteral">        }</span>
<a name="l00453"></a>00453 <span class="stringliteral">        // for debugging purpose only</span>
<a name="l00454"></a>00454 <span class="stringliteral">        // var_dump($this-&gt;sort_column); die();</span>
<a name="l00455"></a>00455 <span class="stringliteral">    }</span>
<a name="l00456"></a>00456 <span class="stringliteral"></span>
<a name="l00457"></a>00457 <span class="stringliteral"></span>
<a name="l00464"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_aa2434803968118d4b015c335a698c14e.html#aa2434803968118d4b015c335a698c14e">00464</a> <span class="stringliteral">    public function setSQLCriteria($str_where_clause)</span>
<a name="l00465"></a>00465 <span class="stringliteral">    {</span>
<a name="l00466"></a>00466 <span class="stringliteral">        if (!$str_where_clause) {</span>
<a name="l00467"></a>00467 <span class="stringliteral">            // do nothing</span>
<a name="l00468"></a>00468 <span class="stringliteral">        } else {</span>
<a name="l00469"></a>00469 <span class="stringliteral">            // remove WHERE word if exist</span>
<a name="l00470"></a>00470 <span class="stringliteral">            $str_where_clause = preg_replace(&quot;/^WHERE\s/i&quot;, &apos;</span><span class="stringliteral">&apos;, $str_where_clause);</span>
<a name="l00471"></a>00471 <span class="stringliteral">            $this-&gt;sql_criteria = &apos;</span>WHERE <span class="stringliteral">&apos;.$str_where_clause;</span>
<a name="l00472"></a>00472 <span class="stringliteral">        }</span>
<a name="l00473"></a>00473 <span class="stringliteral">    }</span>
<a name="l00474"></a>00474 <span class="stringliteral"></span>
<a name="l00475"></a>00475 <span class="stringliteral"></span>
<a name="l00481"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a664e253cef5a7b0c041cc1c53a82a22d.html#a664e253cef5a7b0c041cc1c53a82a22d">00481</a> <span class="stringliteral">    public function setSQLorder($str_order_column)</span>
<a name="l00482"></a>00482 <span class="stringliteral">    {</span>
<a name="l00483"></a>00483 <span class="stringliteral">        if (!$str_order_column) {</span>
<a name="l00484"></a>00484 <span class="stringliteral">            // do nothing</span>
<a name="l00485"></a>00485 <span class="stringliteral">        } else {</span>
<a name="l00486"></a>00486 <span class="stringliteral">            // remove WHERE word if exist</span>
<a name="l00487"></a>00487 <span class="stringliteral">            $this-&gt;sql_order = &apos;</span>ORDER BY <span class="stringliteral">&apos;.$str_order_column;</span>
<a name="l00488"></a>00488 <span class="stringliteral">        }</span>
<a name="l00489"></a>00489 <span class="stringliteral">    }</span>
<a name="l00490"></a>00490 <span class="stringliteral"></span>
<a name="l00491"></a>00491 <span class="stringliteral"></span>
<a name="l00498"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a693d1da9dba47f89a84bcbcddc221f39.html#a693d1da9dba47f89a84bcbcddc221f39">00498</a> <span class="stringliteral">    public function disableSort()</span>
<a name="l00499"></a>00499 <span class="stringliteral">    {</span>
<a name="l00500"></a>00500 <span class="stringliteral">        if (func_num_args() &gt; 0) {</span>
<a name="l00501"></a>00501 <span class="stringliteral">            $this-&gt;no_sort_column = func_get_args();</span>
<a name="l00502"></a>00502 <span class="stringliteral">        }</span>
<a name="l00503"></a>00503 <span class="stringliteral">    }</span>
<a name="l00504"></a>00504 <span class="stringliteral"></span>
<a name="l00505"></a>00505 <span class="stringliteral"></span>
<a name="l00513"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_a55e2ef60a7d6d7ef0ca22054c7d6fd74.html#a55e2ef60a7d6d7ef0ca22054c7d6fd74">00513</a> <span class="stringliteral">    public function modifyColumnContent($int_column_no, $str_new_value)</span>
<a name="l00514"></a>00514 <span class="stringliteral">    {</span>
<a name="l00515"></a>00515 <span class="stringliteral">        $this-&gt;modified_content[$int_column_no] = $str_new_value;</span>
<a name="l00516"></a>00516 <span class="stringliteral">    }</span>
<a name="l00517"></a>00517 <span class="stringliteral"></span>
<a name="l00518"></a>00518 <span class="stringliteral"></span>
<a name="l00524"></a><a class="code" href="../../d5/deb/classsimbio__datagrid_aa1934db9f5137924f27b599bfb8acd64.html#aa1934db9f5137924f27b599bfb8acd64">00524</a> <span class="stringliteral">    protected function removeInvisibleField()</span>
<a name="l00525"></a>00525 <span class="stringliteral">    {</span>
<a name="l00526"></a>00526 <span class="stringliteral">        if (!$this-&gt;invisible_fields OR !$this-&gt;grid_result_rows) return;</span>
<a name="l00527"></a>00527 <span class="stringliteral">        $_result_rows_buffer = array();</span>
<a name="l00528"></a>00528 <span class="stringliteral">        foreach ($this-&gt;grid_result_rows as $_data) {</span>
<a name="l00529"></a>00529 <span class="stringliteral">            foreach ($this-&gt;invisible_fields as $_inv_fld) {</span>
<a name="l00530"></a>00530 <span class="stringliteral">                unset($_data[$_inv_fld]);</span>
<a name="l00531"></a>00531 <span class="stringliteral">                // remove header field to</span>
<a name="l00532"></a>00532 <span class="stringliteral">                unset($this-&gt;grid_result_fields[$_inv_fld]);</span>
<a name="l00533"></a>00533 <span class="stringliteral">            }</span>
<a name="l00534"></a>00534 <span class="stringliteral">            $_result_rows_buffer[] = $_data;</span>
<a name="l00535"></a>00535 <span class="stringliteral">        }</span>
<a name="l00536"></a>00536 <span class="stringliteral">        $this-&gt;grid_result_rows = $_result_rows_buffer;</span>
<a name="l00537"></a>00537 <span class="stringliteral">    }</span>
<a name="l00538"></a>00538 <span class="stringliteral">}</span>
<a name="l00539"></a>00539 <span class="stringliteral"></span>
<a name="l00540"></a>00540 <span class="stringliteral">?&gt;</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Fri Oct 16 20:43:21 2009 for Senayan3 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
